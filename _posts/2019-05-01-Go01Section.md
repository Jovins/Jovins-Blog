---
layout: post
title: "01-C语言和Go语言对比"
date: 2019-05-01 13:05:00.000000000 +09:00
categories: [Go]
tags: [Go]
---

## 源文件对比

- C语言源文件

| 文件扩展名 | 源类型           |
| ----- | ------------- |
| .h    | 头文件，存放代码声明    |
| .c    | C语言源文件，存放代码实现 |

- Go语言源文件

| 文件扩展名 | 源类型            |
| ----- | -------------- |
| .go   | Go语言源文件，存放代码实现 |

## 代码管理对比

- C语言中通过文件来管理代码
  - 想使用某一个函数时,只需要include导入对应的.h文件即可
- Go语言中通过包来管理代码
  - Go语言没有.h文件的概念, 在Go中想使用某一个函数时, 只需要import导入对应的包即可
- C语言中函数、变量公私有管理
  - 通过extern和static实现是否公开函数和变量
- Go语言中函数、变量公私有管理
  - 通过函数名称首字母大小写实现是否公开函数
  - 通过变量名称首字母大小写实现是否公开变量

## 关键字对比

- C语言中一共有32个关键字

| 1      | 2        | 3          | 4            | 5           | 6          | 7          | 8        |
| ------ | -------- | ---------- | ------------ | ----------- | ---------- | ---------- | -------- |
| **if** | **else** | **switch** | **case**     | **default** | **break**  | **return** | **goto** |
| do     | while    | **for**    | **continue** | typedef     | **struct** | enum       | union    |
| char   | short    | int        | long         | float       | double     | void       | sizeof   |
| signed | unsigned | **const**  | auto         | register    | static     | extern     | volatile |

- Go语言中一共有25个关键字

| 1           | 2         | 3            | 4        | 5           | 6         | 7          | 8        |
| ----------- | --------- | ------------ | -------- | ----------- | --------- | ---------- | -------- |
| **if**      | **else**  | **switch**   | **case** | **default** | **break** | **return** | **goto** |
| fallthrough | **for**   | **continue** | type     | **struct**  | var       | **const**  | map      |
| func        | interface | range        | import   | package     | defer     | go         | select   |
| chan        |           |              |          |             |           |            |          |

+ 关键字

```
C语言关键字就是被C语言赋予特殊含义的单词
Go语言关键字就是被GO语言赋予特殊含义的单词

关键字的特点
C语言关键字都是小写, 在开发工具中都有特殊的颜色
Go语言关键字都是小写, 在开发工具中都有特殊的颜色

关键字注意点
C语言的关键字不能用于变量的名称和函数的名称
Go言的关键字不能用于变量的名称和函数的名称
```

## 数据类型对比

- C语言数据类型

![](/assets/images/go-GoFirstProgram-01.png)

+ Go语言数据类型

![](/assets/images/go-GoFirstProgram-02.png)

+ C语言各数据类型占用内存空间

| 类型        | 32位编译器 | 64位编译器 |
| --------- | ------ | ------ |
| char      | 1      | 1      |
| int       | 4      | 4      |
| float     | 4      | 4      |
| double    | 8      | 8      |
| short     | 2      | 2      |
| long      | 4      | 8      |
| long long | 8      | 8      |
| void*     | 4      | 8      |

- Go语言各数据类型占用内存空间

| 类型           | 32位编译器 | 64位编译器 | 本质                                       |
| ------------ | ------ | ------ | ---------------------------------------- |
| int8/uint8   | 1      | 1      | signed char/unsigned char                |
| int16/uint16 | 2      | 2      | signed short/unsigned short              |
| int32/uint32 | 4      | 4      | signed int/unsigned int                  |
| int64/uint64 | 8      | 8      | signed long long int/unsigned long long int |
| byte         | 1      | 1      | uint8/unsigned char                      |
| rune         | 4      | 4      | int32/signed int                         |
| int          | 4      | 8      | 根据机器位数决定长度                               |
| uintptr      | 4      | 8      | 根据机器位数决定长度 uint32/uint64                 |
| float32      | 4      | 4      | float                                    |
| float64      | 8      | 8      | double                                   |
| true         | 1      | 1      | char类型的整型                                |
| false        | 1      | 1      | char类型的整型                                |

- 和C语言一样,Go语言也提供了Sizeof计算变量的内存空间
  - 1.导入import "unsafe"包
  - 2.通过unsafe.Sizeof()计算变量内存空间


- Go语言基本数据类型内部实现

  - [golang官方网站下载go1.4版本源代码](https://github.com/golang/go/releases)越老版本的代码越纯粹,越适合新手学习随着代码的更新迭代会逐步变得非常复杂, 所以此处建议下载1.4版本
  - 解压后打开路径: `go\src\runtime\runtime.h`

  ![](/assets/images/go-GoFirstProgram-03.png)

  - 得到如下实现代码

  ```c
  // 第8行到35行
  typedef signed char     int8;
  typedef unsigned char       uint8;
  typedef signed short        int16;
  typedef unsigned short      uint16;
  typedef signed int      int32;
  typedef unsigned int        uint32;
  typedef signed long long int    int64;
  typedef unsigned long long int  uint64;
  typedef float           float32;
  typedef double          float64;
  
  #ifdef _64BIT
  typedef uint64      uintptr;
  typedef int64       intptr;
  typedef int64       intgo; // Go's int
  typedef uint64      uintgo; // Go's uint
  #else
  typedef uint32      uintptr;
  typedef int32       intptr;
  typedef int32       intgo; // Go's int
  typedef uint32      uintgo; // Go's uint
  #endif
  
  #ifdef _64BITREG
  typedef uint64      uintreg;
  #else
  typedef uint32      uintreg;
  #endif
  
  // 第153行到157行
  enum
  {
      true    = 1,
      false   = 0,
  };
  ```

  - install B 时刻:
    Go本质就是用C语言编写的一门高级编程语言
    所以江哥前面教你C语言就是为了今天能让你看懂Go的实现代码,做到知其然知其所以然

## 常量变量对比

- C语言定义常量和变量格式

```
数据类型 变量名称 = 值;
const 数据类型 常量名称 = 值;

```

- Go语言定义常量和变量格式
  - 除了以下标准格式外,Go语言还提供了好几种简单的语法糖

```
var 变量名称 数据类型 = 值;
const 变量名称 数据类型 = 值;
```

+ 标识符

```
1.1C语言中程序员自己起的名称就是标识符
1.2GO语言中程序员自己起的名称就是标识符

2.标识符的名称规则
2.1C语言中标识符只能由数字/字母/_组成, 并且不能以数字开头
2.2Go语言中标识符只能由数字/字母/_组成, 并且不能以数字开头
注意点:
Go语言支持UTF-8, 所以可以用中文作为标识符(不推荐)
标识符严格区分大小写 Test和test不是同一个标识符

3.标识符名称规范
3.1在C语言中要求驼峰命名
3.2在Go语言中也要求驼峰命名
```

## 注释对比

- 和C语言一样,Go语言也支持单行注释和多行注释, 并且所有注释的特性都和C语言一样
  - 单行注释 `// 被注释内容`
  - 多行注释 `/* 被注释内容*/`
- 在Go语言中,官方更加推荐使用单行注释,而非多行注释(详情可以直接查看Go官方源码)

## 运算符对比

- 算数运算符和C语言几乎一样
  - Go语言中++、--运算符不支持前置
    - 错误写法: ++i; --i;
  - Go语言中++、--是语句,不是表达式,所以必须独占一行
    - 错误写法: a = i++;  return i++;

| 运算符  | 描述   | 实例    |
| ---- | ---- | ----- |
| +    | 相加   | A + B |
| -    | 相减   | A - B |
| *    | 相乘   | A * B |
| /    | 相除   | B / A |
| %    | 求余   | B % A |
| ++   | 自增   | A++   |
| --   | 自减   | A--   |

- 关系算符和C语言一样

| 运算符  | 描述                                    | 实例     |
| ---- | ------------------------------------- | ------ |
| ==   | 检查两个值是否相等，如果相等返回 True 否则返回 False。     | A == B |
| !=   | 检查两个值是否不相等，如果不相等返回 True 否则返回 False。   | A != B |
| >    | 检查左边值是否大于右边值，如果是返回 True 否则返回 False。   | A > B  |
| <    | 检查左边值是否小于右边值，如果是返回 True 否则返回 False。   | A < B  |
| >=   | 检查左边值是否大于等于右边值，如果是返回 True 否则返回 False。 | A >= B |
| <=   | 检查左边值是否小于等于右边值，如果是返回 True 否则返回 False。 | A <= B |

- 逻辑运算符和C语言一样

| 运算符    | 描述                                    | 实例       |
| ------ | ------------------------------------- | -------- |
| &&     | 如果两边的操作数都是 True，则条件 True，否则为 False。   | A && B   |
| `\|\|` | 如果两边的操作数有一个 True，则条件 True，否则为 False。  | A \|\| B |
| !      | 如果条件为 True，则逻辑 NOT 条件 False，否则为 True。 | !A       |

- 位运算符和C语言几乎一样
  - 新增一个&^运算符

| 运算符  | 描述                                      | 实例     |
| ---- | --------------------------------------- | ------ |
| &    | 参与运算的两数各对应的二进位相与, 对应位只要都是1结果就为1         | A & B  |
| `\|` | 参与运算的两数各对应的二进位相或,对应位只要其中一个是1结果就为1       | A \| B |
| ^    | 参与运算的两数各对应的二进位相异或,对应位只要不同结果就是1          | A ^ B  |
| <<   | 左移运算符,左移n位就是乘以2的n次方                     | A << 2 |
| >>   | 右移运算符,右移n位就是除以2的n次方                     | B >> 2 |
| &^   | 逻辑清零运算符, B对应位是1,A对应位清零,B对应位是0, A对应位保留原样 | A &^ B |

```go
int main(){
    /*
      0110      a
    &^1011      b 如果b位位1,那么结果为0, 否则结果为a位对应的值
    ----------
      0100
    */
    a1 := 6
    b1 := 11
    res1 := a1 &^ b1
    fmt.Println("res1 = ", res1) // 4

    /*
      1011      a
    &^1101      b 如果b位位1,那么结果为0, 否则结果为a位对应的值
    ----------
      0010
    */
    a2 := 11
    b2 := 13
    res2 := a2 &^ b2
    fmt.Println("res2 = ", res2) // 2
}
```

- 赋值运算符和C语言几乎一样
  - 新增一个&^=运算符

| 运算符   | 描述       | 实例                           |
| ----- | -------- | ---------------------------- |
| =     | 将右边赋值给左边 | C = A + B 将 A + B 表达式结果赋值给 C |
| +=    | 相加后再赋值   | C += A 等于 C = C + A          |
| -=    | 相减后再赋值   | C -= A 等于 C = C - A          |
| *=    | 相乘后再赋值   | C *= A 等于 C = C * A          |
| /=    | 相除后再赋值   | C /= A 等于 C = C / A          |
| %=    | 求余后再赋值   | C %= A 等于 C = C % A          |
| <<=   | 左移赋值     | C <<= 2 等于 C = C << 2        |
| >>=   | 右移赋值     | C >>= 2 等于 C = C >> 2        |
| &=    | 位逻辑与赋值   | C &= 2 等于 C = C & 2          |
| ^=    | 位逻辑或赋值   | C ^= 2 等于 C = C ^ 2          |
| `\|=` | 位逻辑异或赋值  | C \|= 2 等于 C = C \| 2        |
| &^=   | 位逻辑清零赋值  | C &^= 2 等于 C = C &^ 2        |

## 流程控制语句对比

- C语言流程控制中的if、switch、for在Go语言都可以使用
- C语言中的四大跳转语句return、break、continue、goto在Go语言都可以使用
- Go语言除了实现C语言中if、switch、for、return、break、continue、goto的基本功能以外,还对if、switch、for、break、continue进行了增强
  - 例如: if 条件表达式前面可以添加初始化表达式
  - 例如: break、continue可以指定标签
  - 例如: switch语句可以当做if/elseif来使用
  - ... ...
- 值得注意的是Go语言中没有while循环和dowhile循环, 因为它们能做的Go语言中的for循环都可以做

## 函数和方法对比

- C语言定义函数格式

```
返回值类型 函数名称(形参列表) {
        函数体相关语句;
        return 返回值;
}

```

- Go语言定义函数格式

```
func  函数名称(形参列表)(返回值列表) {
        函数体相关语句;
        return 返回值;
}

```

- C语言中没有方法的概念, 但是Go语言中有方法
  - 对于初学者而言,可以简单的把方法理解为一种特殊的函数

```
func  (接收者 接受者类型)函数名称(形参列表)(返回值列表) {
        函数体相关语句;
        return 返回值;
}
```

## 编程思想对比

- C语言是一门面向过程的编程语言
  - 面向过程: 按部就班, 亲力亲为,关注的是我应该怎么做?
  - 做饭例子: 面向过程做饭
    - 1.上街买菜
    - 2.摘菜
    - 3.洗菜
    - 4.切菜
    - 5.开火炒菜
    - 6.淘米煮饭
    - 7.吃饭
- Go语言是们面向对象的编程语言
  - 面向对象:化繁为简, 能不自己干自己就不干,关注的是我应该让谁来做?
  - 做饭例子: 面向对象做饭
  - 1.找个会做饭女朋友 or 男朋友
  - 2.老婆我饿了 or 老公我饿了
  - 3.躺着...等她/他把饭做好
  - 4.吃饭
- 不要把面向过程和面向对象想象得那么神奇, 它们只是思考问题的方式不同而已

## 其它新增特性

- 接口
- 并发
- 反射
- 异常处理

## Go学习笔记

+ C语言是由于什么组成的?
  + C语言是由函数组成的
  + 同样Go语言也是由函数组成的
+ C语言程序的入口是谁?
  + C语言程序的入口是main函数
  + 同样Go语言的程序入口也是main函数
+ C语言main函数的注意点?
  + 一个程序只能有一个main函数, 没有main函数程序不能执行
  + 同样Go语言也只能有一个main函数, 没有main函数程序不能执行
+ main函数的格式?

```
int main(){
逻辑语句;
}
fun: 代表这是一个函数
main: 函数的名称
(): 形参列表
{}: 函数体
fun main(){
   逻辑语句;
}
```

+ C语言中如何往控制台输出内容?

```
#include <stdio.h> 告诉系统去哪找输出函数的实现
printf("要输出的内容"); 告诉系统要输出什么内容

在GO语言中如何往控制台输出内容?
import "fmt" 告诉系统去哪找输出函数的实现
fmt.Printf("要输出的内容"); 告诉系统要输出什么内容

注意点:
Go语言的main函数只能写在package main的这个包中
```

+ 如何快速新建一个文件或者文件夹

```
Ctrl + Alt + Ins
```

+ 保存源代码的文件不同

```
1.1C语言的源代码保存在.c文件中
1.2Go语言的源代码保存在.go文件中
```

+ 代码的管理方式不同

```
C语言通过文件来管理代码, 会将不同的功能(模块)的代码, 放到不同的文件中, 然后声明.h, 然后include导入.h文件使用对应的代码
Go语言通过包来管理代码, 会将不同功能(模块)的代码, 放到不同的包中, 然后通过import导入包来使用对应的代码
```

+ 什么是包?

```
1.在Go语言中, 一个文件夹就是一个包, 只需要将不同的类型的.go文件放到不同的文件夹中, 然后通过package声明包名即可.
2.注意点:
2.1Go语言规范规定, 包名要和.go文件所在的文件夹的名称保持一致
2.2Go语言规定, 包名不能重复
```

+ Go语言标准的项目格式

```
-------|---------src文件夹(用于存储.go文件的文件夹)
----------------------|---------main文件夹(存放package main对应文件的文件夹)
----------------------|---------other文件夹(存放package 其它对应文件的文件夹)
-------|---------bin文件夹(用于存放可执行程序的文件夹)
-------|---------pkg文件夹(用于存放二进制文件的文件夹)
```

+ 函数的调用格式不同

```
C语言只要include之后, 就可以直接通过函数名称调用了
Go语言通过import之后, 还需通过报名.函数名称的方式来调用
```

+ 语句的结束方式不同

```
C语言每条语句后面都必须添加分号
Go语言每条语句后面不用添加分号, 但是如果两条语句在同一行, 就必须添加分号
```

+ 对代码的严格程度不同

```
C语言中include了一个.h文件, 哪怕没有使用也不会报错
Go语言中import了一个包, 如果没有使用, 就会报错

C语言中定义变量没有使用不会报错
Go语言中定义变量没有使用就会报错

C语言中函数的{可以和函数名称在同一行, 也可以不再同一行
Go语言中函数的{必须和函数名称在同一行, 否则会报错
```